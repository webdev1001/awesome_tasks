- content_for(:header_title){ _("Show organization: %{name}", name: @organization.name) }

= design_box _("Actions"), 350 do
  = link_to _("Edit organization"), edit_organization_path(@organization), class: "button"
  = link_to _("Add project"), new_project_path(project: {organization_id: @organization.id}), class: "button"

%br

= DesignBox.boxt _("Details"), 500
%table.form
  %tbody
    %tr
      %td= Organization.human_attribute_name(:email)
      %td= mail_to @organization.email if @organization.email?
    %tr
      %td= Organization.human_attribute_name(:customer)
      %td= @organization.customer? ? _("Yes") : _("No")
    %tr
      %td= Organization.human_attribute_name(:creditor)
      %td= @organization.creditor? ? _("Yes") : _("No")

    - [:name, :vat_no, :delivery_address, :delivery_zip_code, :delivery_city, :delivery_country, :invoice_address, :invoice_zip_code, :invoice_city, :invoice_country].each do |column|
      %tr
        %td= Organization.human_attribute_name(column)
        %td= @organization.__send__(column)
    %tr
      %td= Organization.human_attribute_name(:payment_info)
      %td= simple_format @organization.payment_info
= DesignBox.boxb

%br

= DesignBox.boxt Project.model_name.human(count: 2), 350
%table.list
  %thead
    %tr
      %th= Project.model_name.human
  %tbody
    - @organization.projects.each do |project|
      %tr
        %td= link_to_project project
    - if @organization.projects.none?
      %tr
        %td.error{colspan: 1}
          = _("No projects has been added for this organization.")
= DesignBox.boxb

%br

= design_box Invoice.model_name.human(count: 2), 600 do
  %table.list
    %thead
      %tr
        %th= Invoice.model_name.human
        %th= Invoice.human_attribute_name(:invoice_type)
        %th= Invoice.human_attribute_name(:created_at)
        %th.align-right= Invoice.human_attribute_name(:amount)
    %tbody
      - @organization.invoices.order(:created_at).reverse_order.each do |invoice|
        %tr
          %td= link_to_invoice invoice
          %td= invoice.translated_invoice_type
          %td= l(invoice.created_at, format: :short)
          %td.align-right= number_to_currency invoice.amount, unit: ""
      - if @organization.invoices.none?
        %tr
          %td.error{colspan: 4}
            = _("No invoices has been added for this organization.")
